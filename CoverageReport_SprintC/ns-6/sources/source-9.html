


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > TaskRepository</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">pt.ipp.isep.dei.g312.repository</a>
</div>

<h1>Coverage Summary for Class: TaskRepository (pt.ipp.isep.dei.g312.repository)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">TaskRepository</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    57.7%
  </span>
  <span class="absValue">
    (15/26)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    52.8%
  </span>
  <span class="absValue">
    (103/195)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package pt.ipp.isep.dei.g312.repository;
&nbsp;
&nbsp;import pt.ipp.isep.dei.g312.domain.*;
&nbsp;
&nbsp;import java.io.*;
&nbsp;import java.time.*;
&nbsp;import java.util.*;
&nbsp;
&nbsp;
&nbsp;
&nbsp;/**
&nbsp; * Repository class for managing tasks.
&nbsp; */
<b class="fc">&nbsp;public class TaskRepository implements Serializable {</b>
<b class="fc">&nbsp;    public List&lt;Task&gt; taskList = new ArrayList&lt;&gt;(); //isto passa a ser uma lista de tasks, passa a chamar-se taskList</b>
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a task to the repository.
&nbsp;     *
&nbsp;     * @param task the task to add
&nbsp;     * @return an Optional containing the added task if it was successfully added, or empty otherwise
&nbsp;     */
&nbsp;    public Optional&lt;Task&gt; addTask(Task task) {
<b class="fc">&nbsp;        Optional&lt;Task&gt; newTask = Optional.empty();</b>
<b class="fc">&nbsp;        boolean operationSuccess = false;</b>
&nbsp;
<b class="fc">&nbsp;        if (isValidTask(task)) {</b>
<b class="fc">&nbsp;            newTask = Optional.of(task.clone());</b>
<b class="fc">&nbsp;            operationSuccess = taskList.add(newTask.get());</b>
&nbsp;        }
<b class="fc">&nbsp;        if (!operationSuccess) {</b>
<b class="fc">&nbsp;            newTask = Optional.empty();</b>
&nbsp;        }
<b class="fc">&nbsp;        return newTask;</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the list of tasks from the repository.
&nbsp;     *
&nbsp;     * @return an Optional containing the list of tasks, or empty if the list is null
&nbsp;     */
&nbsp;    public Optional&lt;List&lt;Task&gt;&gt; getTaskList(){
<b class="fc">&nbsp;        Optional&lt;List&lt;Task&gt;&gt; tasksList = Optional.empty();</b>
<b class="fc">&nbsp;        List&lt;Task&gt; listTask = new ArrayList&lt;&gt;(taskList);</b>
<b class="fc">&nbsp;        tasksList= Optional.of(listTask);</b>
<b class="fc">&nbsp;        return tasksList;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the list of tasks in the agenda.
&nbsp;     *
&nbsp;     * @return the list of tasks in the agenda
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getAgenda() {
<b class="fc">&nbsp;        ArrayList&lt;Task&gt; agenda = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (Task t : taskList) {</b>
<b class="fc">&nbsp;            if (t.getTaskPosition().equals(TaskPosition.AGENDA)) {</b>
<b class="fc">&nbsp;                agenda.add(t);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return agenda;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the list of tasks in the TO DO list.
&nbsp;     *
&nbsp;     * @return the list of tasks in the TO DO list
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getToDoList() {
<b class="nc">&nbsp;        ArrayList&lt;Task&gt; toDoList = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Task t : taskList) {</b>
<b class="nc">&nbsp;            if (t.getTaskPosition() == TaskPosition.TODOLIST) {</b>
<b class="nc">&nbsp;                toDoList.add(t);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return toDoList;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Updates a task in the agenda.
&nbsp;     *
&nbsp;     * @param task the task to update
&nbsp;     * @return an Optional containing the updated task if it was successfully updated, or empty otherwise
&nbsp;     */
&nbsp;    public Optional&lt;Task&gt; updateTask(Task task) {
<b class="fc">&nbsp;        int index = 0;</b>
<b class="fc">&nbsp;        for (Task t : taskList) {</b>
<b class="fc">&nbsp;            if (t.getTaskID() == task.getTaskID()) {</b>
<b class="fc">&nbsp;                    taskList.set(index, task);</b>
<b class="fc">&nbsp;                    return Optional.of(task);</b>
&nbsp;            }
<b class="nc">&nbsp;            index++;</b>
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return Optional.empty();</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Checks the availability of a team for a given task.
&nbsp;     *
&nbsp;     * @param teamTasks the list of tasks assigned to the team
&nbsp;     * @param task the task to check availability for
&nbsp;     * @return true if the team is available for the task, false otherwise
&nbsp;     */
&nbsp;    public boolean teamAvailability(List&lt;Task&gt; teamTasks, Task task) {
<b class="nc">&nbsp;        if (teamTasks.isEmpty()) {</b>
<b class="nc">&nbsp;            return true;</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        for (Task t : teamTasks) {</b>
<b class="nc">&nbsp;            if (task.taskOverlap(t)) {</b>
<b class="nc">&nbsp;                return false;</b>
&nbsp;
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return true;</b>
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves all tasks assigned to a team, excluding those with status CANCELED or DONE.
&nbsp;     *
&nbsp;     * @param team the team for which to retrieve tasks
&nbsp;     * @return the list of tasks assigned to the team
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getAllTeamTasks(Team team) {
<b class="nc">&nbsp;        List&lt;Task&gt; teamTasks = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="nc">&nbsp;            Team assignedTeam = task.getAssignedTeam();</b>
<b class="nc">&nbsp;            if (assignedTeam != null &amp;&amp; assignedTeam.equals(team)) {</b>
<b class="nc">&nbsp;                if (!task.getStatus().equals(TaskStatus.CANCELED) &amp;&amp; !task.getStatus().equals(TaskStatus.DONE)) {</b>
<b class="nc">&nbsp;                    teamTasks.add(task);</b>
&nbsp;                }
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return teamTasks;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of all agenda tasks except those that are marked as Done or Canceled.
&nbsp;     *
&nbsp;     * @return A list of agenda tasks that are not marked as Done or Canceled.
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getAllAgendaTasksExceptDoneCanceled() {
<b class="fc">&nbsp;        List&lt;Task&gt; tasksExcept = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="fc">&nbsp;            if (task.getStatus() != TaskStatus.DONE &amp;&amp; task.getStatus() != TaskStatus.CANCELED) {</b>
<b class="fc">&nbsp;                tasksExcept.add(task);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return tasksExcept;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    // method to get a list of planned status tasks
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks with status PLANNED.
&nbsp;     *
&nbsp;     * @return a list of planned tasks
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getPlannedTasks() {
<b class="nc">&nbsp;        List&lt;Task&gt; plannedTasks = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="nc">&nbsp;            if (task.getStatus() == TaskStatus.PLANNED) {</b>
<b class="nc">&nbsp;                plannedTasks.add(task);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return plannedTasks;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks with status PLANNED or POSTPONED.
&nbsp;     *
&nbsp;     * @return a list of planned and postponed tasks
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getPlannedAndPostponedTasks() {
<b class="nc">&nbsp;        List&lt;Task&gt; plannedTasks = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="nc">&nbsp;            if (task.getStatus() == TaskStatus.PLANNED || task.getStatus() == TaskStatus.POSTPONED) {</b>
<b class="nc">&nbsp;                plannedTasks.add(task);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return plannedTasks;</b>
&nbsp;    }
&nbsp;
&nbsp;    // method to get a list of pending status tasks
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks with status PENDING.
&nbsp;     *
&nbsp;     * @return a list of pending tasks
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getPendingTasks() {
<b class="nc">&nbsp;        List&lt;Task&gt; pendingTasks = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="nc">&nbsp;            if (task.getStatus() == TaskStatus.PENDING) {</b>
<b class="nc">&nbsp;                pendingTasks.add(task);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return pendingTasks;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks associated with a specific green space.
&nbsp;     *
&nbsp;     * @param greenSpace the GreenSpace for which to retrieve tasks
&nbsp;     * @return a List of Task objects associated with the specified green space
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getTasksByGreenSpace(GreenSpace greenSpace) {
<b class="fc">&nbsp;        List&lt;Task&gt; tasksOfGreenSpace = new ArrayList&lt;&gt;();</b>
&nbsp;        for (Task t :
<b class="fc">&nbsp;                taskList) {</b>
<b class="fc">&nbsp;            if (t.getGreenSpace().equals(greenSpace)) {</b>
<b class="fc">&nbsp;                tasksOfGreenSpace.add(t);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return tasksOfGreenSpace;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Checks if a task is valid, ensuring it is not already present in the list of tasks.
&nbsp;     *
&nbsp;     * @param task the task to validate
&nbsp;     * @return true if the task is valid (i.e., not already present in the list),
&nbsp;     *        false otherwise
&nbsp;     */
&nbsp;    private boolean isValidTask(Task task) {
&nbsp;
&nbsp;        for (Task t :
<b class="fc">&nbsp;                taskList) {</b>
<b class="fc">&nbsp;            if (t.getTaskID() == task.getTaskID()){</b>
<b class="fc">&nbsp;                return false;</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Adds a new task to the repository.
&nbsp;     *
&nbsp;     * @param task the task to add
&nbsp;     * @return an Optional containing the added task if it was successfully added, or empty otherwise
&nbsp;     */
&nbsp;    public Optional&lt;Task&gt; add(Task task) {
<b class="nc">&nbsp;        Optional&lt;Task&gt; newTask = Optional.empty();</b>
<b class="nc">&nbsp;        boolean operationSuccess = false;</b>
&nbsp;
<b class="nc">&nbsp;        if (isValidTask(task)) {</b>
<b class="nc">&nbsp;            newTask = Optional.of(task.clone());</b>
<b class="nc">&nbsp;            operationSuccess = taskList.add(newTask.get());</b>
&nbsp;        }
<b class="nc">&nbsp;        if (!operationSuccess) {</b>
<b class="nc">&nbsp;            newTask = Optional.empty();</b>
&nbsp;        }
<b class="nc">&nbsp;        return newTask;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the list of available vehicles for a given task.
&nbsp;     *
&nbsp;     * @param taskSelecionada The task for which vehicle availability is checked.
&nbsp;     * @param vehicles        The list of vehicles to be considered for availability.
&nbsp;     * @return A list of vehicles that are available for the given task.
&nbsp;     */
&nbsp;    public List&lt;Vehicle&gt; getVehicleAvaiability(Task taskSelecionada, List&lt;Vehicle&gt; vehicles) {
&nbsp;        Boolean checkAvailable;
<b class="fc">&nbsp;        List&lt;Vehicle&gt; listaVeiculosDisponiveis = new ArrayList&lt;&gt;();</b>
&nbsp;
<b class="fc">&nbsp;        for (Vehicle vehicle : vehicles) {</b>
<b class="fc">&nbsp;            if (vehicle != null) {</b>
<b class="fc">&nbsp;                checkAvailable = true;</b>
<b class="fc">&nbsp;                for (Task task : getAllAgendaTasksExceptDoneCanceled()) {</b>
<b class="fc">&nbsp;                    if (task != null) {</b>
<b class="fc">&nbsp;                        for (Vehicle taskVehicle : task.getAssignedVehicles()) {</b>
<b class="fc">&nbsp;                            if (taskVehicle != null &amp;&amp; taskVehicle.getRegistrationPlate().equals(vehicle.getRegistrationPlate())) {</b>
<b class="fc">&nbsp;                                if (!(taskSelecionada.getStartDate().compareTo(task.getEndDate()) &gt;= 0 || taskSelecionada.getEndDate().compareTo(task.getStartDate()) &lt;= 0)) {</b>
<b class="fc">&nbsp;                                    checkAvailable = false;</b>
<b class="fc">&nbsp;                                    break;</b>
&nbsp;                                }
&nbsp;                            }
&nbsp;
<b class="fc">&nbsp;                        }</b>
&nbsp;
&nbsp;                    }
<b class="fc">&nbsp;                    if (!checkAvailable) {</b>
<b class="fc">&nbsp;                        break;</b>
&nbsp;                    }
&nbsp;
<b class="fc">&nbsp;                }</b>
<b class="fc">&nbsp;                if (checkAvailable) {</b>
<b class="fc">&nbsp;                    listaVeiculosDisponiveis.add(vehicle);</b>
&nbsp;
&nbsp;                }
&nbsp;            }
&nbsp;
&nbsp;
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return listaVeiculosDisponiveis;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks that can be canceled.
&nbsp;     *
&nbsp;     * @return a list of cancelable tasks
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getTasksCancelable() {
<b class="fc">&nbsp;        List&lt;Task&gt; cancelableTasks = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="fc">&nbsp;            if (task.getStatus() != TaskStatus.CANCELED) {</b>
<b class="fc">&nbsp;                cancelableTasks.add(task);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return cancelableTasks;</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks that can be completed.
&nbsp;     *
&nbsp;     * @return a list of completable tasks
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getTasksCompletable(Employee colab) {
<b class="fc">&nbsp;        List&lt;Task&gt; completableTasks = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for (Task task : getAgenda()) {</b>
<b class="fc">&nbsp;            if (task.getStatus() != TaskStatus.CANCELED &amp;&amp; task.getStatus() != TaskStatus.DONE) {</b>
<b class="fc">&nbsp;                if (task.getAssignedTeam()!=null){</b>
&nbsp;                    for (Employee e:
<b class="fc">&nbsp;                            task.getAssignedTeam().getTeamEmployees()) {</b>
<b class="fc">&nbsp;                        if (e.getEmail().equals(colab.getEmail())){</b>
<b class="fc">&nbsp;                            completableTasks.add(task);</b>
&nbsp;                        }
<b class="fc">&nbsp;                    }</b>
&nbsp;                }
&nbsp;
&nbsp;
&nbsp;            }
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return completableTasks;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Cancels a given task.
&nbsp;     *
&nbsp;     * @param taskToCancel the task to cancel
&nbsp;     */
&nbsp;
&nbsp;    public void cancelTask(Task taskToCancel) {
<b class="fc">&nbsp;        taskToCancel.cancel();</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Completes a given task.
&nbsp;     *
&nbsp;     * @param taskToComplete the task to cancel
&nbsp;     * @param observation optional observation
&nbsp;     * @param endDate date of the finished task
&nbsp;     */
&nbsp;    public void completeTask(Task taskToComplete, String observation, Date endDate) {
<b class="fc">&nbsp;        taskToComplete.complete(observation,endDate);</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds the specified task to the agenda with the provided start date and time.
&nbsp;     *
&nbsp;     * @param task the task to add to the agenda
&nbsp;     * @param startDate the date on which the task is to be scheduled
&nbsp;     * @param startTime the time at which the task is to start
&nbsp;     */
&nbsp;    public void addTaskAgenda(Task task, LocalDate startDate, LocalTime startTime) {
&nbsp;        for (Task t :
<b class="nc">&nbsp;                taskList) {</b>
<b class="nc">&nbsp;            if (t.getTaskID() == task.getTaskID()) {</b>
<b class="nc">&nbsp;                t.addTaskAgenda(startDate, startTime);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the next available task ID.
&nbsp;     *
&nbsp;     * @return the next available task ID
&nbsp;     */
&nbsp;    public int getNextTaskId() {
<b class="fc">&nbsp;        int maxId=0;</b>
&nbsp;        for (Task task:
<b class="fc">&nbsp;             taskList) {</b>
<b class="fc">&nbsp;            if (maxId&lt;task.getTaskID()){</b>
<b class="fc">&nbsp;                maxId=task.getTaskID();</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return maxId+1;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves a list of tasks associated with a specific green space.
&nbsp;     *
&nbsp;     * @param greenSpace the GreenSpace for which to retrieve tasks
&nbsp;     * @return a list of tasks associated with the specified green space
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getTasksByGreenSpaceForTeam(GreenSpace greenSpace) {
<b class="nc">&nbsp;        List&lt;Task&gt; tasksOfGreenSpace = new ArrayList&lt;&gt;();</b>
&nbsp;        for (Task t :
<b class="nc">&nbsp;                taskList) {</b>
<b class="nc">&nbsp;            if (t.getGreenSpace().equals(greenSpace)) {</b>
<b class="nc">&nbsp;                tasksOfGreenSpace.add(t);</b>
&nbsp;            }
<b class="nc">&nbsp;        }</b>
<b class="nc">&nbsp;        return tasksOfGreenSpace;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Serializes the TaskRepository object to a file.
&nbsp;     */
&nbsp;    public void serializateData() {
&nbsp;
<b class="nc">&nbsp;        String filename = this.getClass().getSimpleName()+&quot;.bin&quot;;</b>
&nbsp;
&nbsp;        // Serialization
&nbsp;        try {
&nbsp;
&nbsp;            // Saving of object in a file
<b class="nc">&nbsp;            FileOutputStream file = new FileOutputStream</b>
&nbsp;                    (filename);
<b class="nc">&nbsp;            ObjectOutputStream out = new ObjectOutputStream</b>
&nbsp;                    (file);
&nbsp;
&nbsp;            // Method for serialization of object
<b class="nc">&nbsp;            out.writeObject(this);</b>
&nbsp;
&nbsp;
<b class="nc">&nbsp;            out.close();</b>
<b class="nc">&nbsp;            file.close();</b>
&nbsp;
<b class="nc">&nbsp;            System.out.println(this.getClass().getSimpleName()+&quot; Has Been Serialized successfully! &quot;);</b>
<b class="nc">&nbsp;        } catch (FileNotFoundException ex) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;IOException is caught&quot;);</b>
<b class="nc">&nbsp;        } catch (IOException e) {</b>
<b class="nc">&nbsp;            throw new RuntimeException(e);</b>
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Deserializes the TaskRepository object from a file and adds the skills to the current repository.
&nbsp;     */
&nbsp;    public void getSeralizatedData() {
<b class="nc">&nbsp;        String filename = this.getClass().getSimpleName()+&quot;.bin&quot;;</b>
&nbsp;
&nbsp;        try {
&nbsp;
&nbsp;            // Reading the object from a file
<b class="nc">&nbsp;            FileInputStream file = new FileInputStream</b>
&nbsp;                    (filename);
<b class="nc">&nbsp;            ObjectInputStream in = new ObjectInputStream</b>
&nbsp;                    (file);
&nbsp;
&nbsp;            // Method for deserialization of object
<b class="nc">&nbsp;            TaskRepository taskRepo = (TaskRepository) in.readObject();</b>
&nbsp;
&nbsp;            for (Task t :
<b class="nc">&nbsp;                    taskRepo.getTaskList().get()) {</b>
<b class="nc">&nbsp;                this.addTask(t);</b>
<b class="nc">&nbsp;            }</b>
&nbsp;
<b class="nc">&nbsp;            in.close();</b>
<b class="nc">&nbsp;            file.close();</b>
&nbsp;
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        catch (IOException ex) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;IOException is caught&quot;);</b>
&nbsp;        }
&nbsp;
<b class="nc">&nbsp;        catch (ClassNotFoundException ex) {</b>
<b class="nc">&nbsp;            System.out.println(&quot;ClassNotFoundException&quot; +</b>
&nbsp;                    &quot; is caught&quot;);
<b class="nc">&nbsp;        }</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Retrieves the tasks assigned to the specified user within a given date range.
&nbsp;     *
&nbsp;     * @param userEmail the email of the user whose tasks are to be retrieved
&nbsp;     * @param startDate the start date of the range
&nbsp;     * @param endDate the end date of the range
&nbsp;     * @return a list of tasks assigned to the specified user within the given date range
&nbsp;     */
&nbsp;    public List&lt;Task&gt; getTasksAssignedToMeBetweenToDates(String userEmail, LocalDate startDate, LocalDate endDate) {
&nbsp;
&nbsp;        // Converte LocalDate para ZonedDateTime usando o fuso horário do sistema
<b class="fc">&nbsp;        ZonedDateTime zonedStartDate = startDate.atStartOfDay(ZoneId.systemDefault());</b>
<b class="fc">&nbsp;        ZonedDateTime zonedEndDate = endDate.atStartOfDay(ZoneId.systemDefault());</b>
&nbsp;
&nbsp;        // Converte ZonedDateTime para Date
<b class="fc">&nbsp;        Date startDateDate = Date.from(zonedStartDate.toInstant());</b>
<b class="fc">&nbsp;        Date endDateDate = Date.from(zonedEndDate.toInstant());</b>
&nbsp;
<b class="fc">&nbsp;        List&lt;Task&gt; employeeTasksBetweenDates = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        List&lt;Employee&gt; taskEmployees = new ArrayList&lt;&gt;();</b>
&nbsp;
<b class="fc">&nbsp;        for(Task task : getAgenda()) {</b>
&nbsp;            try {
<b class="fc">&nbsp;                if (task != null) {</b>
<b class="fc">&nbsp;                    if ((startDateDate.before(task.getEndDate()) || startDateDate.equals(task.getEndDate())) &amp;&amp; (endDateDate.after(task.getStartDate()) || endDateDate.equals(task.getStartDate()))) {</b>
<b class="fc">&nbsp;                        if (task.getAssignedTeam() != null &amp;&amp; task.getAssignedTeam().getTeamEmployees() != null) {</b>
<b class="fc">&nbsp;                            taskEmployees = task.getAssignedTeam().getTeamEmployees();</b>
<b class="fc">&nbsp;                            for (Employee emp : taskEmployees) {</b>
<b class="fc">&nbsp;                                if (emp != null &amp;&amp; emp.getEmail().equals(userEmail)) {</b>
<b class="fc">&nbsp;                                    employeeTasksBetweenDates.add(task);</b>
&nbsp;                                }
<b class="fc">&nbsp;                            }</b>
&nbsp;                        }
&nbsp;                    }
&nbsp;                }
<b class="nc">&nbsp;            } catch (NullPointerException e) {</b>
<b class="nc">&nbsp;                System.err.println(&quot;Error: Null value encountered - &quot; + e.getMessage());</b>
<b class="nc">&nbsp;                throw new RuntimeException(&quot;Null value encountered during task processing&quot;, e);</b>
<b class="nc">&nbsp;            } catch (Exception e) {</b>
<b class="nc">&nbsp;                System.err.println(&quot;An unexpected error occurred - &quot; + e.getMessage());</b>
<b class="nc">&nbsp;                throw new RuntimeException(&quot;An unexpected error occurred during task processing&quot;, e);</b>
<b class="fc">&nbsp;            }</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return employeeTasksBetweenDates;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-06-09 17:29</div>
</div>
</body>
</html>
