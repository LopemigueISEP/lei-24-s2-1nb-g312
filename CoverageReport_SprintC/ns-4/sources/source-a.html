


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > Task</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">pt.ipp.isep.dei.g312.domain</a>
</div>

<h1>Coverage Summary for Class: Task (pt.ipp.isep.dei.g312.domain)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">Task</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    80%
  </span>
  <span class="absValue">
    (28/35)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    91.6%
  </span>
  <span class="absValue">
    (76/83)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package pt.ipp.isep.dei.g312.domain;
&nbsp;
&nbsp;import java.io.Serializable;
&nbsp;import java.time.LocalDate;
&nbsp;import java.time.LocalDateTime;
&nbsp;import java.time.LocalTime;
&nbsp;import java.time.ZoneId;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Calendar;
&nbsp;import java.util.Date;
&nbsp;
&nbsp;public class Task implements Cloneable, Serializable {
&nbsp;
&nbsp;    private String title;
&nbsp;    private String description;
&nbsp;
&nbsp;    private int taskExpectedDuration; //expected hours duration
&nbsp;    private String type;
&nbsp;    private GreenSpace greenSpace;
&nbsp;    private TaskUrgency urgency;
&nbsp;    private TaskStatus status;
&nbsp;    private Team assignedTeam;
&nbsp;    private ArrayList&lt;Vehicle&gt; assignedVehicles;
&nbsp;    private int taskID;
&nbsp;    private Date startDate;
&nbsp;    private Date endDate;
&nbsp;    private TaskPosition taskPosition;
&nbsp;    private String observation;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Constructor for creating a task in the to-do list.
&nbsp;     *
&nbsp;     * @param greenSpace the green space associated with the task
&nbsp;     * @param title the title of the task
&nbsp;     * @param description the description of the task
&nbsp;     * @param urgency the urgency level of the task
&nbsp;     * @param taskExpectedDuration the expected duration of the task in minutes
&nbsp;     * @param taskPosition the position of the task, must be TaskPosition.ToDoList
&nbsp;     * @param taskId the ID of the task
&nbsp;     */
<b class="fc">&nbsp;    public Task( GreenSpace greenSpace, String title, String description, TaskUrgency urgency, int taskExpectedDuration, TaskPosition taskPosition,int taskId) {</b>
<b class="fc">&nbsp;        if (taskPosition.equals(TaskPosition.TODOLIST)) {</b>
<b class="fc">&nbsp;            this.greenSpace = greenSpace;</b>
<b class="fc">&nbsp;            this.title = title;</b>
<b class="fc">&nbsp;            this.description = description;</b>
<b class="fc">&nbsp;            this.taskExpectedDuration = taskExpectedDuration;</b>
<b class="fc">&nbsp;            this.urgency = urgency;</b>
<b class="fc">&nbsp;            this.taskPosition = taskPosition;</b>
<b class="fc">&nbsp;            this.assignedVehicles = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;            this.taskID=taskId;</b>
&nbsp;        }
&nbsp;
&nbsp;    }
&nbsp;
&nbsp;    // constructor for clone
<b class="fc">&nbsp;    public Task(String title, String description, int taskExpectedDuration, String type, GreenSpace greenSpace, TaskUrgency urgency, TaskStatus status, Team assignedTeam, ArrayList&lt;Vehicle&gt; assignedVehicles, int taskID, Date startDate, Date endDate, TaskPosition taskPosition) {</b>
<b class="fc">&nbsp;        this.title = title;</b>
<b class="fc">&nbsp;        this.description = description;</b>
<b class="fc">&nbsp;        this.taskExpectedDuration = taskExpectedDuration;</b>
<b class="fc">&nbsp;        this.type = type;</b>
<b class="fc">&nbsp;        this.greenSpace = greenSpace;</b>
<b class="fc">&nbsp;        this.urgency = urgency;</b>
<b class="fc">&nbsp;        this.status = status;</b>
<b class="fc">&nbsp;        this.assignedTeam = assignedTeam;</b>
<b class="fc">&nbsp;        this.assignedVehicles = assignedVehicles;</b>
<b class="fc">&nbsp;        this.taskID = taskID;</b>
<b class="fc">&nbsp;        this.startDate = startDate;</b>
<b class="fc">&nbsp;        this.endDate = endDate;</b>
<b class="fc">&nbsp;        this.taskPosition = taskPosition;</b>
&nbsp;    }
&nbsp;
<b class="nc">&nbsp;    public int getTaskExpectedDuration() {return taskExpectedDuration;}</b>
&nbsp;
&nbsp;    public void assignTeam(Team team) {
<b class="fc">&nbsp;        this.assignedTeam = team;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void assignVehicle(Vehicle vehicle) {
<b class="fc">&nbsp;        this.assignedVehicles.add(vehicle);</b>
&nbsp;    }
&nbsp;
&nbsp;    public void clearVehicleList(){
<b class="fc">&nbsp;        this.assignedVehicles.clear();</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTaskStartDate(Date date) {
<b class="fc">&nbsp;        this.startDate = date;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setTaskStatus(TaskStatus status) {
<b class="fc">&nbsp;        this.status = status;</b>
&nbsp;    }
&nbsp;
&nbsp;    // method to get team assigned to the task
&nbsp;    public Team getAssignedTeam() {
<b class="fc">&nbsp;        return this.assignedTeam;</b>
&nbsp;    }
&nbsp;
&nbsp;    // method to return status of a task
&nbsp;    public TaskStatus getStatus() {
<b class="fc">&nbsp;        return this.status;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public Date getStartDate() {
<b class="fc">&nbsp;        return this.startDate;</b>
&nbsp;    }
&nbsp;    public void setStartDate(Date startDate) {
<b class="nc">&nbsp;        this.startDate = startDate;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public int getDuration() {
<b class="fc">&nbsp;        return this.taskExpectedDuration;</b>
&nbsp;    }
&nbsp;
&nbsp;    public int getTaskID() {
<b class="fc">&nbsp;        return this.taskID;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getDescription() {
<b class="fc">&nbsp;        return this.description;</b>
&nbsp;    }
&nbsp;    public void setDescription(String description) {
<b class="nc">&nbsp;        this.description = description;</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getTitle() {
<b class="fc">&nbsp;        return this.title;</b>
&nbsp;    }
&nbsp;    public void setTitle(String title) {
<b class="nc">&nbsp;        this.title = title;</b>
&nbsp;    }
&nbsp;
&nbsp;    public ArrayList&lt;Vehicle&gt; getAssignedVehicles() {
<b class="fc">&nbsp;        return this.assignedVehicles;</b>
&nbsp;    }
&nbsp;
&nbsp;    public GreenSpace getGreenSpace() {
<b class="fc">&nbsp;        return new GreenSpace(this.greenSpace);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    public TaskPosition getTaskPosition() {
<b class="fc">&nbsp;        return taskPosition;</b>
&nbsp;    }
&nbsp;
&nbsp;    public TaskUrgency getUrgency() {
<b class="fc">&nbsp;        return this.urgency;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Calculates the end date of a task based on its start date and expected duration,
&nbsp;     * considering working hours from 9 AM to 5 PM.
&nbsp;     * @return The calculated end date of the task.
&nbsp;     */
&nbsp;    private Date calculateEndDate() {
&nbsp;
<b class="fc">&nbsp;        Date start = this.startDate;</b>
<b class="fc">&nbsp;        int duration = this.taskExpectedDuration;</b>
<b class="fc">&nbsp;        Calendar calendar = Calendar.getInstance();</b>
<b class="fc">&nbsp;        calendar.setTime(start);</b>
&nbsp;
<b class="fc">&nbsp;        while (duration &gt; 0) {</b>
<b class="fc">&nbsp;            int startHour = calendar.get(Calendar.HOUR_OF_DAY);</b>
<b class="fc">&nbsp;            int remainingWorkHoursToday = 17 - startHour;</b>
&nbsp;
&nbsp;            int workHoursToday;
<b class="fc">&nbsp;            if (remainingWorkHoursToday &lt; duration) {</b>
<b class="fc">&nbsp;                workHoursToday = remainingWorkHoursToday;</b>
&nbsp;            } else {
<b class="fc">&nbsp;                workHoursToday = duration;</b>
&nbsp;            }
&nbsp;
<b class="fc">&nbsp;            calendar.add(Calendar.HOUR_OF_DAY, workHoursToday);</b>
<b class="fc">&nbsp;            duration -= workHoursToday;</b>
&nbsp;
<b class="fc">&nbsp;            if (duration &gt; 0) {</b>
<b class="fc">&nbsp;                calendar.add(Calendar.DAY_OF_YEAR, 1);</b>
<b class="fc">&nbsp;                calendar.set(Calendar.HOUR_OF_DAY, 9);</b>
<b class="fc">&nbsp;                calendar.set(Calendar.MINUTE, 0);</b>
&nbsp;            }
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return calendar.getTime();</b>
&nbsp;    }
&nbsp;
&nbsp;    // method to set the end date of a task
&nbsp;    public void setEndDate() {
<b class="fc">&nbsp;        this.endDate = calculateEndDate();</b>
&nbsp;    }
&nbsp;
<b class="fc">&nbsp;    public Date getEndDate() {return this.endDate;}</b>
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Checks if this task overlaps with another task based on their start and end dates.
&nbsp;     * @param other The other task to check for overlap.
&nbsp;     * @return True if the tasks overlap, false otherwise.
&nbsp;     */
&nbsp;    public boolean taskOverlap(Task other) {
<b class="fc">&nbsp;        if (this.startDate.compareTo(other.endDate) &gt;= 0 || this.endDate.compareTo(other.startDate) &lt;= 0) {</b>
<b class="fc">&nbsp;            return false;</b>
&nbsp;        }
<b class="fc">&nbsp;        return true;</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Creates and returns a clone of this task.
&nbsp;     * @return A clone of this task.
&nbsp;     */
&nbsp;    public Task clone() {
<b class="fc">&nbsp;        return new Task(this.title, this.description, this.taskExpectedDuration, this.type, this.greenSpace, this.urgency, this.status, this.assignedTeam, this.assignedVehicles, this.taskID, this.startDate, this.endDate, this.taskPosition);</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Returns a string representation of the task, including its title, green space,
&nbsp;     * start date, and status.
&nbsp;     *
&nbsp;     * @return a formatted string containing the task&#39;s title, associated green space,
&nbsp;     *         start date, and status
&nbsp;     */
&nbsp;    @Override
&nbsp;    public String toString() {
<b class="nc">&nbsp;        return String.format(&quot;Task: %s - GreenSpace: %s - Start Date: %s - Status: %s&quot;,</b>
&nbsp;                title, greenSpace, startDate, status);
&nbsp;    }
&nbsp;    /**
&nbsp;     * Compares this task with the specified task for order based on their start dates.
&nbsp;     *
&nbsp;     * @param other the task to be compared
&nbsp;     * @return a negative integer, zero, or a positive integer as this task&#39;s start date
&nbsp;     *         is before, equal to, or after the specified task&#39;s start date
&nbsp;     */
&nbsp;    public int compareTo(Task other) {
<b class="nc">&nbsp;        return this.startDate.compareTo(other.startDate);</b>
&nbsp;    }
&nbsp;
&nbsp;
&nbsp;    /**
&nbsp;     * Cancels the task by setting its status to CANCELED.
&nbsp;     * This method changes the task&#39;s status to indicate that it has been canceled and is no longer PLANNED or POSTPONED.
&nbsp;     */
&nbsp;    public void cancel() {
<b class="fc">&nbsp;        this.status=TaskStatus.CANCELED;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Completes the task by setting its status to DONE.
&nbsp;     * This method also records an observation and sets the end date of the task.
&nbsp;     *
&nbsp;     * @param observation a string containing observations or notes about the task&#39;s completion
&nbsp;     * @param endDate the date and time when the task was completed
&nbsp;     */
&nbsp;    public void complete(String observation, Date endDate) {
<b class="fc">&nbsp;        this.observation=observation;</b>
<b class="fc">&nbsp;        this.endDate=endDate;</b>
<b class="fc">&nbsp;        this.status=TaskStatus.DONE;</b>
&nbsp;    }
&nbsp;
&nbsp;    /**
&nbsp;     * Adds the task to the agenda with the specified start date and time.
&nbsp;     * Sets the task&#39;s position to {@code TaskPosition.AGENDA} and its status to {@code TaskStatus.PENDING}.
&nbsp;     * Also calculates and sets the task&#39;s start date and end date based on the provided start date and time.
&nbsp;     *
&nbsp;     * @param startDate the date on which the task is to be scheduled
&nbsp;     * @param startTime the time at which the task is to start
&nbsp;     */
&nbsp;    public void addTaskAgenda(LocalDate startDate, LocalTime startTime) {
<b class="fc">&nbsp;        this.taskPosition=TaskPosition.AGENDA;</b>
<b class="fc">&nbsp;        this.status=TaskStatus.PENDING;</b>
<b class="fc">&nbsp;        LocalDateTime newStartDateTime = LocalDateTime.of(startDate, startTime);</b>
<b class="fc">&nbsp;        this.startDate=Date.from(newStartDateTime.atZone(ZoneId.systemDefault()).toInstant());</b>
<b class="fc">&nbsp;        this.endDate= calculateEndDate();</b>
&nbsp;    }
&nbsp;    /**
&nbsp;     * Compares this Task object with the specified object for equality.
&nbsp;     * The comparison is based on the task ID of the Task objects.
&nbsp;     *
&nbsp;     * @param obj the object to compare with this Task.
&nbsp;     * @return true if the specified object is a Task with the same task ID as this Task, false otherwise.
&nbsp;     */
&nbsp;    @Override
&nbsp;    public boolean equals(Object obj) {
<b class="fc">&nbsp;        Task task = (Task) obj;</b>
<b class="fc">&nbsp;        return this.getTaskID()==task.getTaskID();</b>
&nbsp;    }
&nbsp;
&nbsp;    public String getObservation() {
<b class="fc">&nbsp;        return observation;</b>
&nbsp;    }
&nbsp;
&nbsp;    public void setObservation(String observation) {
<b class="nc">&nbsp;        this.observation = observation;</b>
&nbsp;    }
&nbsp;}
&nbsp;
&nbsp;
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2024-06-09 17:29</div>
</div>
</body>
</html>
